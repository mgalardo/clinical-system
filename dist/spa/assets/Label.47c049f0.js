import{c as E,r as P,au as $,aq as A,ar as R,o as k,h as I,d as M,i as O,Y as G,aa as F,C as L,a8 as Q,bh as j,G as p,J as v,K as V,L as D,aF as B,bf as K,bg as w,bi as z,aE as J,R as T}from"./index.0fee6aa5.js";var U=E({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validationSuccess","validationError"],setup(o,{slots:r,emit:s}){const d=O(),n=P(null);let l=0;const c=[];function b(e){const i=typeof e=="boolean"?e:o.noErrorFocus!==!0,m=++l,x=(t,a)=>{s(`validation${t===!0?"Success":"Error"}`,a)},S=t=>{const a=t.validate();return typeof a.then=="function"?a.then(u=>({valid:u,comp:t}),u=>({valid:!1,comp:t,err:u})):Promise.resolve({valid:a,comp:t})};return(o.greedy===!0?Promise.all(c.map(S)).then(t=>t.filter(a=>a.valid!==!0)):c.reduce((t,a)=>t.then(()=>S(a).then(u=>{if(u.valid===!1)return Promise.reject(u)})),Promise.resolve()).catch(t=>[t])).then(t=>{if(t===void 0||t.length===0)return m===l&&x(!0),!0;if(m===l){const{comp:a,err:u}=t[0];if(u!==void 0&&console.error(u),x(!1,a),i===!0){const C=t.find(({comp:q})=>typeof q.focus=="function"&&G(q.$)===!1);C!==void 0&&C.comp.focus()}}return!1})}function _(){l++,c.forEach(e=>{typeof e.resetValidation=="function"&&e.resetValidation()})}function y(e){e!==void 0&&F(e);const i=l+1;b().then(m=>{i===l&&m===!0&&(o.onSubmit!==void 0?s("submit",e):e!==void 0&&e.target!==void 0&&typeof e.target.submit=="function"&&e.target.submit())})}function h(e){e!==void 0&&F(e),s("reset"),L(()=>{_(),o.autofocus===!0&&o.noResetFocus!==!0&&f()})}function f(){Q(()=>{if(n.value===null)return;const e=n.value.querySelector("[autofocus][tabindex], [data-autofocus][tabindex]")||n.value.querySelector("[autofocus] [tabindex], [data-autofocus] [tabindex]")||n.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(n.value.querySelectorAll("[tabindex]"),i=>i.tabIndex!==-1);e!=null&&e.focus({preventScroll:!0})})}$(j,{bindComponent(e){c.push(e)},unbindComponent(e){const i=c.indexOf(e);i!==-1&&c.splice(i,1)}});let g=!1;return A(()=>{g=!0}),R(()=>{g===!0&&o.autofocus===!0&&f()}),k(()=>{o.autofocus===!0&&f()}),Object.assign(d.proxy,{validate:b,resetValidation:_,submit:y,reset:h,focus:f,getValidationComponents:()=>c}),()=>I("form",{class:"q-form",ref:n,onSubmit:y,onReset:h},M(r.default))}});const N=p({__name:"Form",emits:["submit"],setup(o,{emit:r}){const s=r;function d(){s("submit")}return(n,l)=>(v(),V(U,{onSubmit:d},{default:D(()=>[B(n.$slots,"default")]),_:3}))}}),W=p({__name:"OptionGroup",props:K({label:{},dense:{type:Boolean},options:{}},{modelValue:{required:!0},modelModifiers:{}}),emits:["update:modelValue"],setup(o){const r=w(o,"modelValue");return(s,d)=>(v(),V(z,{label:s.label,modelValue:r.value,"onUpdate:modelValue":d[0]||(d[0]=n=>r.value=n),options:s.options,color:"primary"},null,8,["label","modelValue","options"]))}});const X=p({__name:"Label",props:{required:{type:Boolean}},setup(o){return(r,s)=>(v(),J("div",{class:T(["default-label",{"default-label--required":r.required}])},[B(r.$slots,"default")],2))}});export{N as _,X as a,W as b};
