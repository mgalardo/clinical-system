import{Q as Sa}from"./QPage.cdc23ff8.js";import{_ as ka}from"./PageTitle.472d4990.js";import{a as c,c as Ma,aZ as Ha,k as Aa,n as Ea,bl as Oa,r as V,aN as Ya,w as oe,h as s,X as re,d as $a,g as Ta,bm as Fa,v as We,Q as H,A as Ye,B as la,bn as ja,D as T,E as Oe,F,N as Ke,b5 as Ba,G as b,b8 as Ge,I as ge,bi as ee,H as Na,K as A,aP as Ia,b9 as Ra,ba as Qa,t as Pa,aG as L,bo as Ua,aS as Me,aR as He,aT as Xe,x as La,ap as za}from"./index.7de34237.js";import{u as Ja}from"./use-render-cache.3aae9b27.js";import{t as Wa,a as Ze,f as Ka,g as Ga,j as Ae,_ as Xa,Q as Za}from"./QTooltip.0a33620f.js";import{p as J}from"./format.5b2e1320.js";import{Q as et}from"./QScrollArea.ca13adf5.js";import{u as oa}from"./use-quasar.4ce7cc41.js";import{u as ea}from"./use-dialog-plugin-component.66e9e83e.js";import{_ as at}from"./Form.a5b4757a.js";import{_ as he}from"./TextInput.bb21decb.js";import{_ as ue}from"./SelectInput.d5ceb945.js";import"./Button.be851270.js";import"./QScrollObserver.193c41fa.js";import"./touch.9135741d.js";import"./QSelect.7f382174.js";import"./QItemLabel.75ba6031.js";const tt=["gregorian","persian"],aa={mask:{type:String},locale:Object,calendar:{type:String,validator:n=>tt.includes(n),default:"gregorian"},landscape:Boolean,color:String,textColor:String,square:Boolean,flat:Boolean,bordered:Boolean,readonly:Boolean,disable:Boolean},nt=["update:modelValue"];function R(n){return n.year+"/"+J(n.month)+"/"+J(n.day)}function lt(n,x){const d=c(()=>n.disable!==!0&&n.readonly!==!0),p=c(()=>d.value===!0?0:-1),D=c(()=>{const y=[];return n.color!==void 0&&y.push(`bg-${n.color}`),n.textColor!==void 0&&y.push(`text-${n.textColor}`),y.join(" ")});function j(){return n.locale!==void 0?{...x.lang.date,...n.locale}:x.lang.date}function C(y){const Y=new Date,E=y===!0?null:0;if(n.calendar==="persian"){const $=Wa(Y);return{year:$.jy,month:$.jm,day:$.jd}}return{year:Y.getFullYear(),month:Y.getMonth()+1,day:Y.getDate(),hour:E,minute:E,second:E,millisecond:E}}return{editable:d,tabindex:p,headerClass:D,getLocale:j,getCurrentDate:C}}const z=20,ot=["Calendar","Years","Months"],ta=n=>ot.includes(n),Ee=n=>/^-?[\d]+\/[0-1]\d$/.test(n),Z=" \u2014 ";function Q(n){return n.year+"/"+J(n.month)}var rt=Ma({name:"QDate",props:{...aa,...Ha,...Aa,modelValue:{required:!0,validator:n=>typeof n=="string"||Array.isArray(n)===!0||Object(n)===n||n===null},multiple:Boolean,range:Boolean,title:String,subtitle:String,mask:{...aa.mask,default:"YYYY/MM/DD"},defaultYearMonth:{type:String,validator:Ee},yearsInMonthView:Boolean,events:[Array,Function],eventColor:[String,Function],emitImmediately:Boolean,options:[Array,Function],navigationMinYearMonth:{type:String,validator:Ee},navigationMaxYearMonth:{type:String,validator:Ee},noUnset:Boolean,firstDayOfWeek:[String,Number],todayBtn:Boolean,minimal:Boolean,defaultView:{type:String,default:"Calendar",validator:ta}},emits:[...nt,"rangeStart","rangeEnd","navigation"],setup(n,{slots:x,emit:d}){const{proxy:p}=Ta(),{$q:D}=p,j=Ea(n,D),{getCache:C}=Ja(),{tabindex:y,headerClass:Y,getLocale:E,getCurrentDate:$}=lt(n,D);let N;const ae=Oa(n),_=Fa(ae),m=V(null),u=V(Re()),h=V(E()),ye=c(()=>Re()),ua=c(()=>E()),B=c(()=>$()),i=V(Qe(u.value,h.value)),k=V(n.defaultView),$e=c(()=>D.lang.rtl===!0?"right":"left"),ie=V($e.value),_e=V($e.value),be=i.value.year,se=V(be-be%z-(be<0?z:0)),S=V(null),ia=c(()=>{const e=n.landscape===!0?"landscape":"portrait";return`q-date q-date--${e} q-date--${e}-${n.minimal===!0?"minimal":"standard"}`+(j.value===!0?" q-date--dark q-dark":"")+(n.bordered===!0?" q-date--bordered":"")+(n.square===!0?" q-date--square no-border-radius":"")+(n.flat===!0?" q-date--flat no-shadow":"")+(n.disable===!0?" disabled":n.readonly===!0?" q-date--readonly":"")}),P=c(()=>n.color||"primary"),W=c(()=>n.textColor||"white"),de=c(()=>n.emitImmediately===!0&&n.multiple!==!0&&n.range!==!0),De=c(()=>Array.isArray(n.modelValue)===!0?n.modelValue:n.modelValue!==null&&n.modelValue!==void 0?[n.modelValue]:[]),O=c(()=>De.value.filter(e=>typeof e=="string").map(e=>Ve(e,u.value,h.value)).filter(e=>e.dateHash!==null&&e.day!==null&&e.month!==null&&e.year!==null)),K=c(()=>{const e=a=>Ve(a,u.value,h.value);return De.value.filter(a=>Ya(a)===!0&&a.from!==void 0&&a.to!==void 0).map(a=>({from:e(a.from),to:e(a.to)})).filter(a=>a.from.dateHash!==null&&a.to.dateHash!==null&&a.from.dateHash<a.to.dateHash)}),ce=c(()=>n.calendar!=="persian"?e=>new Date(e.year,e.month-1,e.day):e=>{const a=Ze(e.year,e.month,e.day);return new Date(a.gy,a.gm-1,a.gd)}),xe=c(()=>n.calendar==="persian"?R:(e,a,t)=>Ka(new Date(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond),a===void 0?u.value:a,t===void 0?h.value:t,e.year,e.timezoneOffset)),te=c(()=>O.value.length+K.value.reduce((e,a)=>e+1+Ga(ce.value(a.to),ce.value(a.from)),0)),Te=c(()=>{if(n.title!==void 0&&n.title!==null&&n.title.length!==0)return n.title;if(S.value!==null){const t=S.value.init,l=ce.value(t);return h.value.daysShort[l.getDay()]+", "+h.value.monthsShort[t.month-1]+" "+t.day+Z+"?"}if(te.value===0)return Z;if(te.value>1)return`${te.value} ${h.value.pluralDay}`;const e=O.value[0],a=ce.value(e);return isNaN(a.valueOf())===!0?Z:h.value.headerTitle!==void 0?h.value.headerTitle(a,e):h.value.daysShort[a.getDay()]+", "+h.value.monthsShort[e.month-1]+" "+e.day}),sa=c(()=>O.value.concat(K.value.map(a=>a.from)).sort((a,t)=>a.year-t.year||a.month-t.month)[0]),da=c(()=>O.value.concat(K.value.map(a=>a.to)).sort((a,t)=>t.year-a.year||t.month-a.month)[0]),Fe=c(()=>{if(n.subtitle!==void 0&&n.subtitle!==null&&n.subtitle.length!==0)return n.subtitle;if(te.value===0)return Z;if(te.value>1){const e=sa.value,a=da.value,t=h.value.monthsShort;return t[e.month-1]+(e.year!==a.year?" "+e.year+Z+t[a.month-1]+" ":e.month!==a.month?Z+t[a.month-1]:"")+" "+a.year}return O.value[0].year}),ve=c(()=>{const e=[D.iconSet.datetime.arrowLeft,D.iconSet.datetime.arrowRight];return D.lang.rtl===!0?e.reverse():e}),je=c(()=>n.firstDayOfWeek!==void 0?Number(n.firstDayOfWeek):h.value.firstDayOfWeek),ca=c(()=>{const e=h.value.daysShort,a=je.value;return a>0?e.slice(a,7).concat(e.slice(0,a)):e}),I=c(()=>{const e=i.value;return n.calendar!=="persian"?new Date(e.year,e.month,0).getDate():Ae(e.year,e.month)}),va=c(()=>typeof n.eventColor=="function"?n.eventColor:()=>n.eventColor),q=c(()=>{if(n.navigationMinYearMonth===void 0)return null;const e=n.navigationMinYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),w=c(()=>{if(n.navigationMaxYearMonth===void 0)return null;const e=n.navigationMaxYearMonth.split("/");return{year:parseInt(e[0],10),month:parseInt(e[1],10)}}),pe=c(()=>{const e={month:{prev:!0,next:!0},year:{prev:!0,next:!0}};return q.value!==null&&q.value.year>=i.value.year&&(e.year.prev=!1,q.value.year===i.value.year&&q.value.month>=i.value.month&&(e.month.prev=!1)),w.value!==null&&w.value.year<=i.value.year&&(e.year.next=!1,w.value.year===i.value.year&&w.value.month<=i.value.month&&(e.month.next=!1)),e}),me=c(()=>{const e={};return O.value.forEach(a=>{const t=Q(a);e[t]===void 0&&(e[t]=[]),e[t].push(a.day)}),e}),Be=c(()=>{const e={};return K.value.forEach(a=>{const t=Q(a.from),l=Q(a.to);if(e[t]===void 0&&(e[t]=[]),e[t].push({from:a.from.day,to:t===l?a.to.day:void 0,range:a}),t<l){let o;const{year:f,month:r}=a.from,v=r<12?{year:f,month:r+1}:{year:f+1,month:1};for(;(o=Q(v))<=l;)e[o]===void 0&&(e[o]=[]),e[o].push({from:void 0,to:o===l?a.to.day:void 0,range:a}),v.month++,v.month>12&&(v.year++,v.month=1)}}),e}),ne=c(()=>{if(S.value===null)return;const{init:e,initHash:a,final:t,finalHash:l}=S.value,[o,f]=a<=l?[e,t]:[t,e],r=Q(o),v=Q(f);if(r!==M.value&&v!==M.value)return;const g={};return r===M.value?(g.from=o.day,g.includeFrom=!0):g.from=1,v===M.value?(g.to=f.day,g.includeTo=!0):g.to=I.value,g}),M=c(()=>Q(i.value)),ma=c(()=>{const e={};if(n.options===void 0){for(let t=1;t<=I.value;t++)e[t]=!0;return e}const a=typeof n.options=="function"?n.options:t=>n.options.includes(t);for(let t=1;t<=I.value;t++){const l=M.value+"/"+J(t);e[t]=a(l)}return e}),fa=c(()=>{const e={};if(n.events===void 0)for(let a=1;a<=I.value;a++)e[a]=!1;else{const a=typeof n.events=="function"?n.events:t=>n.events.includes(t);for(let t=1;t<=I.value;t++){const l=M.value+"/"+J(t);e[t]=a(l)===!0&&va.value(l)}}return e}),ha=c(()=>{let e,a;const{year:t,month:l}=i.value;if(n.calendar!=="persian")e=new Date(t,l-1,1),a=new Date(t,l-1,0).getDate();else{const o=Ze(t,l,1);e=new Date(o.gy,o.gm-1,o.gd);let f=l-1,r=t;f===0&&(f=12,r--),a=Ae(r,f)}return{days:e.getDay()-je.value-1,endDay:a}}),Ne=c(()=>{const e=[],{days:a,endDay:t}=ha.value,l=a<0?a+7:a;if(l<6)for(let r=t-l;r<=t;r++)e.push({i:r,fill:!0});const o=e.length;for(let r=1;r<=I.value;r++){const v={i:r,event:fa.value[r],classes:[]};ma.value[r]===!0&&(v.in=!0,v.flat=!0),e.push(v)}if(me.value[M.value]!==void 0&&me.value[M.value].forEach(r=>{const v=o+r-1;Object.assign(e[v],{selected:!0,unelevated:!0,flat:!1,color:P.value,textColor:W.value})}),Be.value[M.value]!==void 0&&Be.value[M.value].forEach(r=>{if(r.from!==void 0){const v=o+r.from-1,g=o+(r.to||I.value)-1;for(let le=v;le<=g;le++)Object.assign(e[le],{range:r.range,unelevated:!0,color:P.value,textColor:W.value});Object.assign(e[v],{rangeFrom:!0,flat:!1}),r.to!==void 0&&Object.assign(e[g],{rangeTo:!0,flat:!1})}else if(r.to!==void 0){const v=o+r.to-1;for(let g=o;g<=v;g++)Object.assign(e[g],{range:r.range,unelevated:!0,color:P.value,textColor:W.value});Object.assign(e[v],{flat:!1,rangeTo:!0})}else{const v=o+I.value-1;for(let g=o;g<=v;g++)Object.assign(e[g],{range:r.range,unelevated:!0,color:P.value,textColor:W.value})}}),ne.value!==void 0){const r=o+ne.value.from-1,v=o+ne.value.to-1;for(let g=r;g<=v;g++)e[g].color=P.value,e[g].editRange=!0;ne.value.includeFrom===!0&&(e[r].editRangeFrom=!0),ne.value.includeTo===!0&&(e[v].editRangeTo=!0)}i.value.year===B.value.year&&i.value.month===B.value.month&&(e[o+B.value.day-1].today=!0);const f=e.length%7;if(f>0){const r=7-f;for(let v=1;v<=r;v++)e.push({i:v,fill:!0})}return e.forEach(r=>{let v="q-date__calendar-item ";r.fill===!0?v+="q-date__calendar-item--fill":(v+=`q-date__calendar-item--${r.in===!0?"in":"out"}`,r.range!==void 0&&(v+=` q-date__range${r.rangeTo===!0?"-to":r.rangeFrom===!0?"-from":""}`),r.editRange===!0&&(v+=` q-date__edit-range${r.editRangeFrom===!0?"-from":""}${r.editRangeTo===!0?"-to":""}`),(r.range!==void 0||r.editRange===!0)&&(v+=` text-${r.color}`)),r.classes=v}),e}),ga=c(()=>n.disable===!0?{"aria-disabled":"true"}:{});oe(()=>n.modelValue,e=>{if(N===e)N=0;else{const a=Qe(u.value,h.value);G(a.year,a.month,a)}}),oe(k,()=>{m.value!==null&&p.$el.contains(document.activeElement)===!0&&m.value.focus()}),oe(()=>i.value.year+"|"+i.value.month,()=>{d("navigation",{year:i.value.year,month:i.value.month})}),oe(ye,e=>{Je(e,h.value,"mask"),u.value=e}),oe(ua,e=>{Je(u.value,e,"locale"),h.value=e});function Ie(){const{year:e,month:a,day:t}=B.value,l={...i.value,year:e,month:a,day:t},o=me.value[Q(l)];(o===void 0||o.includes(l.day)===!1)&&we(l),Ce(l.year,l.month)}function ya(e){ta(e)===!0&&(k.value=e)}function _a(e,a){["month","year"].includes(e)&&(e==="month"?Ue:qe)(a===!0?-1:1)}function Ce(e,a){k.value="Calendar",G(e,a)}function ba(e,a){if(n.range===!1||!e){S.value=null;return}const t=Object.assign({...i.value},e),l=a!==void 0?Object.assign({...i.value},a):t;S.value={init:t,initHash:R(t),final:l,finalHash:R(l)},Ce(t.year,t.month)}function Re(){return n.calendar==="persian"?"YYYY/MM/DD":n.mask}function Ve(e,a,t){return Xa(e,a,t,n.calendar,{hour:0,minute:0,second:0,millisecond:0})}function Qe(e,a){const t=Array.isArray(n.modelValue)===!0?n.modelValue:n.modelValue?[n.modelValue]:[];if(t.length===0)return Pe();const l=t[t.length-1],o=Ve(l.from!==void 0?l.from:l,e,a);return o.dateHash===null?Pe():o}function Pe(){let e,a;if(n.defaultYearMonth!==void 0){const t=n.defaultYearMonth.split("/");e=parseInt(t[0],10),a=parseInt(t[1],10)}else{const t=B.value!==void 0?B.value:$();e=t.year,a=t.month}return{year:e,month:a,day:1,hour:0,minute:0,second:0,millisecond:0,dateHash:e+"/"+J(a)+"/01"}}function Ue(e){let a=i.value.year,t=Number(i.value.month)+e;t===13?(t=1,a++):t===0&&(t=12,a--),G(a,t),de.value===!0&&fe("month")}function qe(e){const a=Number(i.value.year)+e;G(a,i.value.month),de.value===!0&&fe("year")}function Da(e){G(e,i.value.month),k.value=n.defaultView==="Years"?"Months":"Calendar",de.value===!0&&fe("year")}function xa(e){G(i.value.year,e),k.value="Calendar",de.value===!0&&fe("month")}function pa(e,a){const t=me.value[a];(t!==void 0&&t.includes(e.day)===!0?Se:we)(e)}function U(e){return{year:e.year,month:e.month,day:e.day}}function G(e,a,t){if(q.value!==null&&e<=q.value.year&&((a<q.value.month||e<q.value.year)&&(a=q.value.month),e=q.value.year),w.value!==null&&e>=w.value.year&&((a>w.value.month||e>w.value.year)&&(a=w.value.month),e=w.value.year),t!==void 0){const{hour:o,minute:f,second:r,millisecond:v,timezoneOffset:g,timeHash:le}=t;Object.assign(i.value,{hour:o,minute:f,second:r,millisecond:v,timezoneOffset:g,timeHash:le})}const l=e+"/"+J(a)+"/01";l!==i.value.dateHash&&(ie.value=i.value.dateHash<l==(D.lang.rtl!==!0)?"left":"right",e!==i.value.year&&(_e.value=ie.value),We(()=>{se.value=e-e%z-(e<0?z:0),Object.assign(i.value,{year:e,month:a,day:1,dateHash:l})}))}function Le(e,a,t){const l=e!==null&&e.length===1&&n.multiple===!1?e[0]:e;N=l;const{reason:o,details:f}=ze(a,t);d("update:modelValue",l,o,f)}function fe(e){const a=O.value[0]!==void 0&&O.value[0].dateHash!==null?{...O.value[0]}:{...i.value};We(()=>{a.year=i.value.year,a.month=i.value.month;const t=n.calendar!=="persian"?new Date(a.year,a.month,0).getDate():Ae(a.year,a.month);a.day=Math.min(Math.max(1,a.day),t);const l=X(a);N=l;const{details:o}=ze("",a);d("update:modelValue",l,e,o)})}function ze(e,a){return a.from!==void 0?{reason:`${e}-range`,details:{...U(a.target),from:U(a.from),to:U(a.to)}}:{reason:`${e}-day`,details:U(a)}}function X(e,a,t){return e.from!==void 0?{from:xe.value(e.from,a,t),to:xe.value(e.to,a,t)}:xe.value(e,a,t)}function we(e){let a;if(n.multiple===!0)if(e.from!==void 0){const t=R(e.from),l=R(e.to),o=O.value.filter(r=>r.dateHash<t||r.dateHash>l),f=K.value.filter(({from:r,to:v})=>v.dateHash<t||r.dateHash>l);a=o.concat(f).concat(e).map(r=>X(r))}else{const t=De.value.slice();t.push(X(e)),a=t}else a=X(e);Le(a,"add",e)}function Se(e){if(n.noUnset===!0)return;let a=null;if(n.multiple===!0&&Array.isArray(n.modelValue)===!0){const t=X(e);e.from!==void 0?a=n.modelValue.filter(l=>l.from!==void 0?l.from!==t.from&&l.to!==t.to:!0):a=n.modelValue.filter(l=>l!==t),a.length===0&&(a=null)}Le(a,"remove",e)}function Je(e,a,t){const l=O.value.concat(K.value).map(o=>X(o,e,a)).filter(o=>o.from!==void 0?o.from.dateHash!==null&&o.to.dateHash!==null:o.dateHash!==null);d("update:modelValue",(n.multiple===!0?l:l[0])||null,t)}function Ca(){if(n.minimal!==!0)return s("div",{class:"q-date__header "+Y.value},[s("div",{class:"relative-position"},[s(re,{name:"q-transition--fade"},()=>s("div",{key:"h-yr-"+Fe.value,class:"q-date__header-subtitle q-date__header-link "+(k.value==="Years"?"q-date__header-link--active":"cursor-pointer"),tabindex:y.value,...C("vY",{onClick(){k.value="Years"},onKeyup(e){e.keyCode===13&&(k.value="Years")}})},[Fe.value]))]),s("div",{class:"q-date__header-title relative-position flex no-wrap"},[s("div",{class:"relative-position col"},[s(re,{name:"q-transition--fade"},()=>s("div",{key:"h-sub"+Te.value,class:"q-date__header-title-label q-date__header-link "+(k.value==="Calendar"?"q-date__header-link--active":"cursor-pointer"),tabindex:y.value,...C("vC",{onClick(){k.value="Calendar"},onKeyup(e){e.keyCode===13&&(k.value="Calendar")}})},[Te.value]))]),n.todayBtn===!0?s(H,{class:"q-date__header-today self-start",icon:D.iconSet.datetime.today,flat:!0,size:"sm",round:!0,tabindex:y.value,onClick:Ie}):null])])}function ke({label:e,type:a,key:t,dir:l,goTo:o,boundaries:f,cls:r}){return[s("div",{class:"row items-center q-date__arrow"},[s(H,{round:!0,dense:!0,size:"sm",flat:!0,icon:ve.value[0],tabindex:y.value,disable:f.prev===!1,...C("go-#"+a,{onClick(){o(-1)}})})]),s("div",{class:"relative-position overflow-hidden flex flex-center"+r},[s(re,{name:"q-transition--jump-"+l},()=>s("div",{key:t},[s(H,{flat:!0,dense:!0,noCaps:!0,label:e,tabindex:y.value,...C("view#"+a,{onClick:()=>{k.value=a}})})]))]),s("div",{class:"row items-center q-date__arrow"},[s(H,{round:!0,dense:!0,size:"sm",flat:!0,icon:ve.value[1],tabindex:y.value,disable:f.next===!1,...C("go+#"+a,{onClick(){o(1)}})})])]}const Va={Calendar:()=>[s("div",{key:"calendar-view",class:"q-date__view q-date__calendar"},[s("div",{class:"q-date__navigation row items-center no-wrap"},ke({label:h.value.months[i.value.month-1],type:"Months",key:i.value.month,dir:ie.value,goTo:Ue,boundaries:pe.value.month,cls:" col"}).concat(ke({label:i.value.year,type:"Years",key:i.value.year,dir:_e.value,goTo:qe,boundaries:pe.value.year,cls:""}))),s("div",{class:"q-date__calendar-weekdays row items-center no-wrap"},ca.value.map(e=>s("div",{class:"q-date__calendar-item"},[s("div",e)]))),s("div",{class:"q-date__calendar-days-container relative-position overflow-hidden"},[s(re,{name:"q-transition--slide-"+ie.value},()=>s("div",{key:M.value,class:"q-date__calendar-days fit"},Ne.value.map(e=>s("div",{class:e.classes},[e.in===!0?s(H,{class:e.today===!0?"q-date__today":"",dense:!0,flat:e.flat,unelevated:e.unelevated,color:e.color,textColor:e.textColor,label:e.i,tabindex:y.value,...C("day#"+e.i,{onClick:()=>{qa(e.i)},onMouseover:()=>{wa(e.i)}})},e.event!==!1?()=>s("div",{class:"q-date__event bg-"+e.event}):null):s("div",""+e.i)]))))])])],Months(){const e=i.value.year===B.value.year,a=l=>q.value!==null&&i.value.year===q.value.year&&q.value.month>l||w.value!==null&&i.value.year===w.value.year&&w.value.month<l,t=h.value.monthsShort.map((l,o)=>{const f=i.value.month===o+1;return s("div",{class:"q-date__months-item flex flex-center"},[s(H,{class:e===!0&&B.value.month===o+1?"q-date__today":null,flat:f!==!0,label:l,unelevated:f,color:f===!0?P.value:null,textColor:f===!0?W.value:null,tabindex:y.value,disable:a(o+1),...C("month#"+o,{onClick:()=>{xa(o+1)}})})])});return n.yearsInMonthView===!0&&t.unshift(s("div",{class:"row no-wrap full-width"},[ke({label:i.value.year,type:"Years",key:i.value.year,dir:_e.value,goTo:qe,boundaries:pe.value.year,cls:" col"})])),s("div",{key:"months-view",class:"q-date__view q-date__months flex flex-center"},t)},Years(){const e=se.value,a=e+z,t=[],l=o=>q.value!==null&&q.value.year>o||w.value!==null&&w.value.year<o;for(let o=e;o<=a;o++){const f=i.value.year===o;t.push(s("div",{class:"q-date__years-item flex flex-center"},[s(H,{key:"yr"+o,class:B.value.year===o?"q-date__today":null,flat:!f,label:o,dense:!0,unelevated:f,color:f===!0?P.value:null,textColor:f===!0?W.value:null,tabindex:y.value,disable:l(o),...C("yr#"+o,{onClick:()=>{Da(o)}})})]))}return s("div",{class:"q-date__view q-date__years flex flex-center"},[s("div",{class:"col-auto"},[s(H,{round:!0,dense:!0,flat:!0,icon:ve.value[0],tabindex:y.value,disable:l(e),...C("y-",{onClick:()=>{se.value-=z}})})]),s("div",{class:"q-date__years-content col self-stretch row items-center"},t),s("div",{class:"col-auto"},[s(H,{round:!0,dense:!0,flat:!0,icon:ve.value[1],tabindex:y.value,disable:l(a),...C("y+",{onClick:()=>{se.value+=z}})})])])}};function qa(e){const a={...i.value,day:e};if(n.range===!1){pa(a,M.value);return}if(S.value===null){const t=Ne.value.find(o=>o.fill!==!0&&o.i===e);if(n.noUnset!==!0&&t.range!==void 0){Se({target:a,from:t.range.from,to:t.range.to});return}if(t.selected===!0){Se(a);return}const l=R(a);S.value={init:a,initHash:l,final:a,finalHash:l},d("rangeStart",U(a))}else{const t=S.value.initHash,l=R(a),o=t<=l?{from:S.value.init,to:a}:{from:a,to:S.value.init};S.value=null,we(t===l?a:{target:a,...o}),d("rangeEnd",{from:U(o.from),to:U(o.to)})}}function wa(e){if(S.value!==null){const a={...i.value,day:e};Object.assign(S.value,{final:a,finalHash:R(a)})}}return Object.assign(p,{setToday:Ie,setView:ya,offsetCalendar:_a,setCalendarTo:Ce,setEditingRange:ba}),()=>{const e=[s("div",{class:"q-date__content col relative-position"},[s(re,{name:"q-transition--fade"},Va[k.value])])],a=$a(x.default);return a!==void 0&&e.push(s("div",{class:"q-date__actions"},a)),n.name!==void 0&&n.disable!==!0&&_(e,"push"),s("div",{class:ia.value,...ga.value},[Ca(),s("div",{ref:m,class:"q-date__main col column",tabindex:-1},e)])}}});function ut(){const n=new Date,x=n.getFullYear(),d=String(n.getMonth()+1).padStart(2,"0"),p=String(n.getDate()).padStart(2,"0");return`${x}/${d}/${p}`}const it={days:"Domingo_Segunda_Ter\xE7a_Quarta_Quinta_Sexta_S\xE1bado".split("_"),daysShort:"Dom_Seg_Ter_Qua_Qui_Sex_S\xE1b".split("_"),months:"Janeiro_Fevereiro_Mar\xE7o_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro".split("_"),monthsShort:"Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez".split("_"),firstDayOfWeek:1,format24h:!0,pluralDay:"dias"};function na(){const n=new Date,x=String(n.getHours()).padStart(2,"0"),d=String(n.getMinutes()).padStart(2,"0"),p=String(n.getSeconds()).padStart(2,"0");return`${x}:${d}:${p}`}const ra=Ye({__name:"AddEditAgendamentoDialog",props:{agendamento:Object},emits:[...ea.emits],setup(n){const x=n,d=V(x.agendamento?x.agendamento:{});d.value.isExternal=!1;const{dialogRef:p,onDialogHide:D,onDialogOK:j,onDialogCancel:C}=ea();function y(){j()}const Y=V([{label:"Nunca",value:"NEVER"},{label:"Semanalmente",value:"WEEK"},{label:"Todo dia",value:"DAY"},{label:"Intervalo de Semana",value:"WEEK_INTERVAL"}]),E=la(),$=c(()=>E.query.profissional),N=ja();function ae(){N.push("/agendamentos/9172?profissional=true")}return(_,m)=>(T(),Oe(Ba,{ref_key:"dialogRef",ref:p,onHide:Ke(D)},{default:F(()=>[b(Qa,{class:"add-edit-agendamento default__border-radius default__box-shadow"},{default:F(()=>[b(Ge,{class:"add-edit-agendamento__title"},{default:F(()=>[ge(ee(n.agendamento?"Editar Agendamento":"Adicionar Agendamento")+" ",1),n.agendamento&&$.value?(T(),Oe(H,{key:0,onClick:ae,color:"primary",unelevated:"",icon:"check",label:"Iniciar Atendimento"})):Na("",!0)]),_:1}),b(at,{onSubmit:y,class:"add-edit-agendamento__form"},{default:F(()=>[b(Ge,null,{default:F(()=>[A("section",null,[b(Ia,{modelValue:d.value.isExternal,"onUpdate:modelValue":m[0]||(m[0]=u=>d.value.isExternal=u),label:"Atendimento Externo"},null,8,["modelValue"])]),A("section",null,[b(ue,{options:[],required:"",modelValue:d.value.especialidade,"onUpdate:modelValue":m[1]||(m[1]=u=>d.value.especialidade=u),label:"Especialidade"},null,8,["modelValue"]),b(ue,{disabled:!d.value.especialidade,options:[],required:"",modelValue:d.value.procedimento,"onUpdate:modelValue":m[2]||(m[2]=u=>d.value.procedimento=u),label:"Procedimento"},null,8,["disabled","modelValue"])]),A("section",null,[b(he,{required:"",type:"date",modelValue:d.value.date,"onUpdate:modelValue":m[3]||(m[3]=u=>d.value.date=u),label:"Data"},null,8,["modelValue"]),b(he,{required:"",type:"time",modelValue:d.value.hora_inicial,"onUpdate:modelValue":m[4]||(m[4]=u=>d.value.hora_inicial=u),label:"Hor\xE1rio inicial"},null,8,["modelValue"]),b(he,{required:"",type:"time",modelValue:d.value.hora_final,"onUpdate:modelValue":m[5]||(m[5]=u=>d.value.hora_final=u),label:"Hor\xE1rio final"},null,8,["modelValue"]),b(ue,{options:Y.value,required:"",modelValue:d.value.repeat,"onUpdate:modelValue":m[6]||(m[6]=u=>d.value.repeat=u),label:"Repetir"},null,8,["options","modelValue"])]),A("section",null,[b(ue,{options:[],required:"",modelValue:d.value.paciente,"onUpdate:modelValue":m[7]||(m[7]=u=>d.value.paciente=u),label:"Paciente"},null,8,["modelValue"]),b(ue,{disable:!d.value.procedimento,options:[],required:"",modelValue:d.value.profissional,"onUpdate:modelValue":m[8]||(m[8]=u=>d.value.profissional=u),label:"Profissional"},null,8,["disable","modelValue"])]),b(he,{required:"",type:"text",modelValue:d.value.hora_final,"onUpdate:modelValue":m[9]||(m[9]=u=>d.value.hora_final=u),label:"Observa\xE7\xF5es"},null,8,["modelValue"])]),_:1}),b(Ra,{align:"right"},{default:F(()=>[b(H,{color:"primary",flat:"",unelevated:"",label:"Cancelar",onClick:Ke(C)},null,8,["onClick"]),b(H,{color:"primary",unelevated:"",label:"Confirmar",type:"submit"})]),_:1})]),_:1})]),_:1})]),_:1},8,["onHide"]))}});const st={class:"agendamento"},dt={class:"agendamento__container"},ct={class:"agendamento__hours"},vt=["hour"],mt=["onClick"],ft={class:"agendamento__profissionais fit"},ht=["profissional"],gt=Ye({name:"Agendamento",__name:"Agendamento",props:{data:{}},setup(n){const x=n,d=V(ut()),p=V(na());setInterval(()=>{p.value=na()},1e3);const D=V(it);function j(_){return!!x.data.find(m=>m.dia===_.replaceAll("/","-"))}const C=V(x.data.reduce((_,m)=>{const{profissional:u}=m;return _[u]||(_[u]=[]),_[u].push(m),_},{})),y=c(()=>{const _=new Date,m=_.getHours(),u=_.getMinutes();return{top:(m+u/60)/24*100+"%"}}),{getScrollTarget:Y,setVerticalScrollPosition:E}=Ua;Pa(()=>{const _=document.querySelector(".agendamento__hour-now"),m=Y(_);E(m,_.getBoundingClientRect().top-300,0)});function $(_){const m=document.querySelector(`[profissional="${_.profissional}"]`),u=document.querySelector(`[hour="${_.hora_inicial.split(":")[0]}"]`);if(!m||!u)return;const h=m.offsetLeft+0,ye=u.offsetTop+20;return{left:h+"px",top:ye+"px"}}const N=oa();function ae(_){N.dialog({component:ra,componentProps:{agendamento:_}})}return(_,m)=>(T(),L("div",st,[A("div",null,[b(rt,{flat:"",month:"",modelValue:d.value,"onUpdate:modelValue":m[0]||(m[0]=u=>d.value=u),locale:D.value,events:j,"event-color":"primary"},null,8,["modelValue","locale"])]),A("div",dt,[b(et,{class:"fit"},{default:F(()=>[A("div",ct,[(T(),L(Me,null,He([6,7,8,9,10,11,12,13,14,15,16,17,18,19,20],u=>A("div",{class:"agendamento__hour",hour:u,key:u},ee(u)+"h",9,vt)),64)),(T(),L("div",{class:"agendamento__hour-now",key:p.value,style:Xe(y.value)},[A("div",null,ee(p.value),1)],4)),(T(!0),L(Me,null,He(_.data,u=>La((T(),L("div",{onClick:h=>ae(u),key:u,class:"agendamento__compromisso",style:Xe($(u))},ee(u.nome_paciente),13,mt)),[[za,u.dia===d.value.replaceAll("/","-")]])),128))]),A("div",ft,[(T(!0),L(Me,null,He(C.value,(u,h)=>(T(),L("div",{class:"agendamento__profissional",key:h},[A("div",{class:"agendamento__profissional-header",profissional:h},[ge(ee(h)+" ",1),b(Za,null,{default:F(()=>[ge(ee(h),1)]),_:2},1024)],8,ht)]))),128))])]),_:1})])]))}}),yt={class:"default__box-shadow",style:{height:"75dvh"}},$t=Ye({name:"Agenda",__name:"Agenda",setup(n){const x=V([{nome_paciente:"Bernardo",profissional:"Aline de Carvalho Fernandes",dia:"2025-03-19",hora_inicial:"8:00",hora_final:"8:50"},{nome_paciente:"Felipe",profissional:"Aline de Carvalho Fernandes",dia:"2025-03-19",hora_inicial:"20:00",hora_final:"20:50"},{nome_paciente:"Arthur",profissional:"Luis",dia:"2025-03-21",hora_inicial:"15:00",hora_final:"15:50"}]),d=oa();function p(){d.dialog({component:ra})}const D=la(),j=c(()=>D.query.profissional);return(C,y)=>(T(),Oe(Sa,null,{default:F(()=>[b(ka,{onClick:p,"add-button":!0,"add-button-label":"Adicionar agendamento"},{default:F(()=>y[0]||(y[0]=[ge("Agenda")])),_:1}),A("section",yt,[b(gt,{data:j.value?[x.value[2]]:x.value},null,8,["data"])])]),_:1}))}});export{$t as default};
